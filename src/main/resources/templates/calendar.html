<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <title>Calendar
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="icon" type="image/x-icon"
        href="https://icons.iconarchive.com/icons/paomedia/small-n-flat/512/calendar-icon.png">

</head>

<body>
    <header>
        <div class="col-md-4"></div>
        <p>Now logged in: <span sec:authentication="name"></span></p>
        <form th:action="@{/logout}" method="post">
            <input type="submit" value="Log Out" />
        </form>
        </div>
    </header>

    <h1 th:text="'Kalenteri'"></h1>

    <h2>Lokakuu</h2>

    <table id="lokakuu">
        <tr>
            <th>Ma</th>
            <th>Ti</th>
            <th>Ke</th>
            <th>To</th>
            <th>Pe</th>
            <th>La</th>
            <th>Su</th>
        </tr>
        <tr>
            <td th:each="day : ${#numbers.sequence(1, 7)}">
                <span th:each="event : ${events}"
                    th:if="${#dates.dayOfWeek(event.startDate) == day and #dates.month(event.startDate) == 10}"
                    th:text="${#dates.format(event.startDate, 'd.')} + ' ' + ${event.title}"></span>
            </td>
        </tr>

    </table>
    <a href="/addevent">Add Event</a>

    <h2>Marraskuu</h2>
    <table id="marraskuu">
        <tr>
            <th>Ma</th>
            <th>Ti</th>
            <th>Ke</th>
            <th>To</th>
            <th>Pe</th>
            <th>La</th>
            <th>Su</th>
        </tr>
        <tr>
            <td th:each="day : ${#numbers.sequence(1, 7)}">
                <span th:each="event : ${events}"
                    th:if="${#dates.dayOfWeek(event.startDate) == day and #dates.month(event.startDate) == 11}"
                    th:text="${#dates.format(event.startDate, 'dd.MM.yyyy')} and ${event.title}"></span>
            </td>
        </tr>
    </table>

    <a href="/addevent">Add Event</a>

    <h1 th:text="'Tapahtumat listana'"></h1>
    <table>
        <tr>
            <th>Title</th>
            <th>Description</th>
            <th>Startdate</th>
            <th>Start time</th>
            <th>Enddate</th>
            <th>End time</th>
            <th>Event type</th>

        </tr>
        <tr th:each="event : ${events}">
            <td th:text="${event.title}">title</td>
            <td th:text="${event.description}">desc</td>
            <td th:text="${#dates.format(event.startDate, 'dd.MM.yyyy')}">startdate</td>
            <td th:text="${event.startTime}">starttime</td>
            <td th:text="${#dates.format(event.endDate, 'dd.MM.yyyy')}">enddate</td>
            <td th:text="${event.endTime}">endtime</td>
            <td th:text="${event.eventType != null ? event.eventType.eventTypeName : ''}">eventtype</td>
            <td>
                <a th:href="@{/edit-event/{id}(id=${event.eventId})}">Edit</a>
            </td>
            <td>
                <a th:href="@{/delete-event/{id}(id=${event.eventId})}">Delete</a>
            </td>
        </tr>
    </table>

    <table>
        <tr>
            <th>Title
            </th>
            <th>Description
            </th>
        </tr>
        <tr th:each="note : ${notes}">
            <td th:text=" ${note.title}"></td>
            <td th:text=" ${note.description}"></td>
            <td>
                <a th:href="@{/edit-note/{id}(id=${note.id})}">Edit</a>
            </td>
            <td>
                <a th:href="@{/delete-note/{id}(id=${note.id})}">Delete</a>
            </td>

        </tr>
    </table>


</body>

</html>